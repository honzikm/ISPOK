<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:include src="/template/head.xhtml"/>

    <h:body>
        <ui:include src="/template/header.xhtml"/>

        <h1>
            <h:outputText value="#{msg.company_name}"/>
        </h1>
        <h2>
            <h:outputText value="#{msg.flight_edit}"/>
        </h2>
        <!--Show all validation messages--> 
        <h:messages  style="color:red" />

        <h:form>
            <!--Flight add-->
            <fieldset>
                <legend>#{msg.flight_add}</legend>
                <ul>
                    <li>
                        <h:outputLabel for="aircraft" value="#{msg.aircraft}: "/>
                        <h:selectOneMenu id="aircraft" value="#{flightEdit.selectedAircraft}" >
                            <f:selectItems value="#{aircraftService.allAircrafts}" var="a" itemValue="#{a.id}" itemLabel="#{a.id}, #{a.manufacturer} #{a.type}, #{a.capacity}"/>
                        </h:selectOneMenu>
                    </li>

                    <li>
                        <h:outputLabel for="to" value="#{msg.line}: "/>
                        <h:selectOneMenu id="to" value="#{flightEdit.selectedLine}" >
                            <f:selectItems value="#{flightEdit.lines}" var="a" itemValue="#{a.id}" itemLabel="#{a.from} -> #{a.to}"/>
                        </h:selectOneMenu>
                    </li>

                    <li>
                        <h:outputLabel for="datetime" value="#{msg.time}: "/>
                        <h:inputText id="datetime" value="#{flightEdit.datetime}" />
                    </li>

                    <li>
                        <h:commandButton action="#{flightEdit.storeFlight()}" value="#{msg.add}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>

        <h:form>
            <!--Flight delete-->
            <fieldset>
                <legend>#{msg.flight_delete}</legend>
                <ul>
                    <li>
                        <h:selectManyListbox value="#{flightEdit.selectedFlights}">
                            <f:selectItems value="#{flightService.allFlights}" var="f" itemValue="#{f.id}" itemLabel="#{f.departure},  #{f.from} -> #{f.to}, #{f.aircraft}"/>
                        </h:selectManyListbox>
                    </li>
                    <li>
                        <h:commandButton action="#{flightEdit.deleteSelectedFlights()}" value="#{msg.delete}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>

        <h:form>
            <!--Add Line-->
            <fieldset>
                <legend>#{msg.line_add}</legend>
                <ul>
                    <li>
                        <h:outputLabel for="from" value="#{msg.from}: "/>
                        <h:selectOneMenu id="from" value="#{flightEdit.fromId}" >
                            <f:selectItems value="#{flightEdit.airports}" var="a" itemValue="#{a.id}" itemLabel="#{a.countryName}, #{a.city}"/>
                        </h:selectOneMenu>
                    </li>
                    <li>
                        <h:outputLabel for="to" value="#{msg.to}:"/>
                        <h:selectOneMenu id="to" value="#{flightEdit.toId}" >
                            <f:selectItems value="#{flightEdit.airports}" var="b" itemValue="#{b.id}" itemLabel="#{b.countryName}, #{b.city}"/>
                        </h:selectOneMenu>
                    </li>
                    <li>
                        <h:commandButton action="#{flightEdit.storeLine()}" value="#{msg.add}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>
        <h:form>
            <fieldset>
                <legend>#{msg.line_delete}</legend>
                <ul>
                    <li>
                        <h:selectManyListbox value="#{flightEdit.selectedLines}">
                            <f:selectItems value="#{flightEdit.lines}" var="c" itemValue="#{c.id}" itemLabel="#{c.from} -> #{c.to}"/>
                        </h:selectManyListbox>
                    </li>
                    <li>
                        <h:commandButton action="#{flightEdit.deleteSelectedLines()}" value="#{msg.delete}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>
    </h:body>
</html>

