<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:include src="/template/head.xhtml"/>

    <h:body>

        <ui:include src="/template/header.xhtml"/>

        <h1>
            <h:outputText value="#{msg.company_name}"/>
        </h1>
        <h2>
            <h:outputText value="#{msg.aircraft_edit}"/>
        </h2>

        <!--Aircraft Edit-->
        <!--<a href="#{facesContext.externalContext.requestContextPath}/static/j_spring_security_logout">logout</a>-->
        <!--Show all validation messages--> 
        <h:messages  style="color:red" />

        <h:form>
            <!--Add Aircraft-->
            <fieldset>
                <legend>#{msg.aircraft_add}</legend>
                <ul>
                    <li>
                        <h:outputLabel for="capacity" value="#{msg.aircraft_capacity}:"/>
                        <h:inputText id="capacity" value="#{aircraftEdit.capacity}" required="true" >
                            <!--<f:validateLength maximum="255" />-->
                        </h:inputText>
                    </li>
                    <li>
                        <h:outputLabel for="manufMenu" value="#{msg.aircraft_manufacturer}:"/>
                        <h:selectOneMenu id="manufMenu" value="#{aircraftEdit.manufacturerId}" >
                            <f:selectItems value="#{aircraftEdit.manufacturers}" var="b" itemValue="#{b.id}" itemLabel="#{b.name}"/>
                        </h:selectOneMenu>
                    </li>
                    <li>
                        <h:outputLabel for="typeMenu" value="#{msg.aircraft_type}:"/>
                        <h:selectOneMenu id="typeMenu" value="#{aircraftEdit.typeId}" >
                            <f:selectItems value="#{aircraftEdit.types}" var="c" itemValue="#{c.id}" itemLabel="#{c.name}"/>
                        </h:selectOneMenu>
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.storeAircraft()}" value="#{msg.add}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>
        <h:form>
            <!-- Delete aircrafts --> 
            <fieldset>
                <legend>#{msg.aircraft_delete}</legend>
                <ul>
                    <li>
                        <h:selectManyListbox value="#{aircraftEdit.selectedAircrafts}">
                            <f:selectItems value="#{aircraftEdit.aircrafts}" var="d" itemValue="#{d.id}" itemLabel="#{d.id}, #{d.manufacturer} #{d.type}, #{d.capacity}"/>
                        </h:selectManyListbox>
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.deleteSelectedAircrafts()}" value="#{msg.delete}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>

        <h:form>
            <!--Add aircraft manufacturer-->
            <fieldset>
                <legend>#{msg.aircraft_manufacturer_add}</legend>
                <ul>
                    <li>
                        <h:inputText id="manufacturer" value="#{aircraftEdit.manufacturer}" required="true" />
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.storeManufacturer()}" value="#{msg.add}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>
        <h:form>
            <!--Delete aircraft manufacturer-->
            <fieldset>
                <legend>#{msg.aircraft_manufacturer_delete}</legend>
                <ul>
                    <li>
                        <h:selectManyListbox value="#{aircraftEdit.selectedManufacturers}">
                            <f:selectItems value="#{aircraftEdit.manufacturers}" var="a" itemValue="#{a.id}" itemLabel="#{a.name}"/>
                        </h:selectManyListbox>
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.deleteSelectedManufacturers()}" value="#{msg.delete}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>

        <h:form>
            <!--Add aircraft type-->
            <fieldset>
                <legend>#{msg.aircraft_type_add}</legend>
                <ul>
                    <li>
                        <h:inputText id="type" value="#{aircraftEdit.type}" required="true" />
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.storeType()}" value="#{msg.add}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>
        <h:form>
            <!--Delete aircraft type-->
            <fieldset>
                <legend>#{msg.aircraft_type_delete}</legend>
                <ul>
                    <li>
                        <h:selectManyListbox value="#{aircraftEdit.selectedTypes}">
                            <f:selectItems value="#{aircraftEdit.types}" var="a" itemValue="#{a.id}" itemLabel="#{a.name}"/>
                        </h:selectManyListbox>
                    </li>
                    <li>
                        <h:commandButton action="#{aircraftEdit.deleteSelectedTypes()}" value="#{msg.delete}"/>
                    </li>
                </ul>
            </fieldset>
        </h:form>

    </h:body>
</html>

