<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>

        <ui:composition template="/admin/template/adminTemplate.xhtml">  

            <ui:define name="title">
                <title>#{msg.visitor_edit} | #{msg.ispok}</title>
            </ui:define>

            <ui:define name="content" >

                <p:panel id="panel" header="#{msg.visitor_edit_confirm}" >

                    <h:form>
                        <table>
                            <tr><td><h:outputLabel for="visitorId" value="#{msg.id}: "/></td><td><h:outputText id="visitorId" value="#{visitorEdit.visitorDto.id}" /></td></tr>
                            <tr><td><h:outputLabel for="firstName" value="#{msg.firstName}: "/></td><td><h:outputText id="firstName" value="#{visitorEdit.visitorDto.firstName}" /></td></tr>
                            <tr><td><h:outputLabel for="lastName" value="#{msg.lastName}: "/></td><td><h:outputText id="lastName" value="#{visitorEdit.visitorDto.lastName}" /></td></tr>
                            <tr><td><h:outputLabel for="birthDate" value="#{msg.visitor_birthdate}: "/></td><td><h:outputText id="birthDate" value="#{visitorEdit.visitorDto.birthDate}" /></td></tr>
                            <tr><td><h:outputLabel for="nin" value="#{msg.visitor_nin}: "/></td><td><h:outputText id="nin" value="#{visitorEdit.visitorDto.nin}" /></td></tr>
                            <tr><td><h:outputLabel for="nickname" value="#{msg.visitor_nickname}: "/></td><td><h:outputText id="nickname" value="#{visitorEdit.visitorDto.nickname}"/></td></tr>
                            <tr><td><h:outputLabel for="telephone" value="#{msg.visitor_telephone}:"/></td><td><h:outputText id="telephone" value="#{visitorEdit.visitorDto.telephone}" /></td></tr>
                            <tr><td><h:outputLabel for="email" value="#{msg.email}: "/></td><td><h:outputText id="email" value="#{visitorEdit.visitorDto.email}" /></td></tr>
                            <tr><td><h:outputLabel for="sex" value="#{msg.visitor_sex}: "/></td><td><h:outputText id="sex" value="#{visitorEdit.visitorDto.sex}" /></td></tr>
                            <tr><td><h:outputLabel for="password" value="#{msg.password}: "/></td><td><h:outputText id="password" value="#{visitorEdit.visitorDto.password}" /></td></tr>
                            <tr><td><h:outputLabel for="address" value="#{msg.domicile_address}: "/></td><td><h:outputText id="address" value="#{visitorEdit.domicileDto.address1}" /></td></tr>
                            <tr><td><h:outputLabel for="city" value="#{msg.domicile_city}: "/></td><td><h:outputText id="city" value="#{visitorEdit.cityDto.name}" /></td></tr>
                            <tr><td><h:outputLabel for="zip" value="#{msg.domicile_zip}: "/></td><td><h:outputText id="zip" value="#{visitorEdit.postalCodeDto.code}" /></td></tr>
                            <tr><td><h:outputLabel for="region" value="#{msg.domicile_region}: "/></td><td><h:outputText id="region" value="#{visitorEdit.regionDto.name}" /></td></tr>
                            <tr><td><h:outputLabel for="country" value="#{msg.domicile_country}: "/></td><td><h:outputText id="country" value="#{visitorEdit.countyDto.name}" /></td></tr>
                            <c:if test="#{visitorEdit.foreignerNewVal}" >
                                <tr><td><h:outputLabel for="passportId" value="#{msg.passportId}: "/></td><td><h:outputText id="passportId" value="#{visitorEdit.visitorDto.idNumber}" /></td></tr>
                                <tr><td><h:outputLabel for="citizenship" value="#{msg.visitor_citizenship}: "/></td><td><h:outputText id="citizenship" value="#{visitorEdit.citizenshipDto.name}" /></td></tr>
                            </c:if>
                            <tr>
                                <td><h:outputLabel for="photo" value="#{msg.visitor_photo}: "/></td>
                                <td>
                                    <p:commandLink  oncomplete="PF('photoDialog').show()" update=":photoDialogId">
                                        <p:graphicImage id="photo" value="#{visitorEdit.photoThumb}" cache="false" />
                                    </p:commandLink>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <ul class="center">
                                        <li class="inline">
                                            <p:commandButton id="okBtn"  value="#{msg.ok}" action="#{visitorEdit.update()}">
                                                <!--<p:ajax update=":growl" />-->
                                            </p:commandButton>
                                        </li>
                                        <li class="inline">
                                            <p:commandButton value="#{msg.back}" action="#{visitorEdit.back()}">

                                            </p:commandButton>
                                        </li>
                                        <li class="inline">
                                            <p:commandButton value="#{msg.cancel}" action="#{visitorEdit.cancel()}">
                                                <!--<p:resetInput target="newOfficeForm" />-->
                                                <!--<p:ajax update="newVisitorForm" resetValues="true"/>--> 
                                            </p:commandButton>
                                        </li>
                                    </ul>
                                </td>
                            </tr>

                        </table>

                        <p:blockUI block=":panel" trigger="okBtn">
                            SAVING...
                        </p:blockUI>

                    </h:form>
                </p:panel>

            </ui:define>

            <ui:define name="body" >
                <p:dialog id="photoDialogId"  header="#{msg.cancel}: " widgetVar="photoDialog" modal="true" resizable="false" closeOnEscape="true" position="center">
                    <p:graphicImage id="photo" value="#{visitorEdit.photo}" cache="false"/>
                </p:dialog>

            </ui:define>

        </ui:composition>
    </h:body>

</html>

