
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:mp ="http://myprimefaces.junkpunk.cz/facelets"
                 template="/admin/template/adminTemplate.xhtml"
                 >

    <ui:define name="title">
        <title>#{msg.offices} | #{msg.ispok}</title>
    </ui:define>


    <ui:define name="centerContent"
               >

        <!--<p:growl id="growl" showDetail="true" />-->

        <p:panel header="#{msg.visitor_new}"
                 >

            <h:form id="newVisitorForm"
                    enctype="multipart/form-data"
                    >
                <table>
                    <tr>
                        <td>
                            <p:outputLabel for="firstName"
                                           value="#{msg.visitor_firstname}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="firstName"
                                         value="#{newVisitor.firstName}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         >
                                <f:converter binding="#{stringTrimmer}" />
                                <f:validator validatorId="firstNameValidator" />
                            </p:inputText>
                        </td>
                        <td>
                            <p:message id="firstNameMsg"
                                       for="firstName"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="lastName"
                                           value="#{msg.visitor_lastname}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="lastName"
                                         value="#{newVisitor.lastName}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         >
                                <f:converter binding="#{stringTrimmer}" />
                                <f:validator validatorId="lastNameValidator" />
                            </p:inputText>
                        </td>
                        <td><p:message id="lastnameMsg"
                                       for="lastName"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="birthDate"
                                           value="#{msg.visitor_birthdate}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="birthDate"
                                         value="#{newVisitor.birthDate}"
                                         required="true"
                                         requiredMessage="#{msg.visitor_birthdate_valid}"
                                         >
                                <f:converter binding="#{birthDateConverter}" />
                            </p:inputText>
                        </td>
                        <td><p:message id="birthDateMsg"
                                       for="birthDate"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="nin"
                                           value="#{msg.visitor_nin}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="nin"
                                         value="#{newVisitor.nin}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         >
                            </p:inputText>
                        </td>
                        <td><p:message id="ninMsg"
                                       for="nin"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel
                                for="nickname"
                                value="#{msg.visitor_nickname}: "
                                />
                        </td>
                        <td>
                            <p:inputText id="nickname"
                                         value="#{newVisitor.nickname}"
                                         >
                                <f:converter binding="#{stringTrimmer}" />
                                <f:validator validatorId="nicknameValidator"/>
                            </p:inputText>
                        </td>
                        <td><p:message id="nicknameMsg"
                                       for="nickname" />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="telephone"
                                           value="#{msg.visitor_telephone}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="telephone"
                                         value="#{newVisitor.telephone}"
                                         >
                                <f:converter binding="#{stringTrimmer}" />
                                <f:validator validatorId="telephoneValidator" />
                            </p:inputText>
                        </td>
                        <td><p:message id="telephoneMsg"
                                       for="telephone"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="email"
                                           value="#{msg.visitor_email}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="email"
                                         value="#{newVisitor.email}"
                                         required="true"
                                         requiredMessage="#{msg.required}"

                                         >
                                <f:converter binding="#{stringTrimmer}"
                                             />
                                <f:validator validatorId="emailValidator"
                                             />
                                <f:validator validatorId="visitorEmailExistValidator"
                                             />
                            </p:inputText>
                        </td>
                        <td><p:message id="emailMsg"
                                       for="email"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="sex"
                                           value="#{msg.visitor_sex}: "
                                           />
                        </td>
                        <td>
                            <p:selectOneMenu id="sex"
                                             value="#{newVisitor.sex}"
                                             >
                                <f:selectItem itemLabel="---"
                                              itemValue=""
                                              />
                                <f:selectItem itemLabel="M"
                                              itemValue="M"
                                              />
                                <f:selectItem itemLabel="F"
                                              itemValue="F"
                                              />
                                <f:selectItem itemLabel="X"
                                              itemValue="X"
                                              />
                            </p:selectOneMenu>
                        </td>
                        <td><p:message id="sexMsg"
                                       for="sex"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="password"
                                           value="#{msg.password}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="password"
                                         value="#{newVisitor.password}"
                                         >

                                <f:validator validatorId="passwordValidator"/>
                            </p:inputText>
                        </td>
                        <td><p:message id="passwordMsg"
                                       for="password"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2"><h:outputText
                                value="#{msg.domicile}"
                                />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="address"
                                           value="#{msg.domicile_address}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="address"
                                         value="#{newVisitor.address}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         >
                            </p:inputText>
                        </td>
                        <td><p:message id="addressMag"
                                       for="address"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="city"
                                           value="#{msg.domicile_city}: "
                                           />
                        </td>
                        <td><p:inputText id="city"
                                         value="#{newVisitor.city}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         />
                        </td>
                        <td><p:message id="cityMsg"
                                       for="city" />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="zip"
                                           value="#{msg.domicile_zip}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="zip"
                                         value="#{newVisitor.zip}"
                                         required="true"
                                         requiredMessage="#{msg.required}"
                                         >
                            </p:inputText>
                        </td>
                        <td><p:message id="zipMsg"
                                       for="zip"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="region"
                                           value="#{msg.domicile_region}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="region"
                                         value="#{newVisitor.region}"
                                         >
                            </p:inputText>
                        </td>
                        <td><p:message id="regionMsg"
                                       for="region"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="country"
                                           value="#{msg.domicile_country}: "
                                           />
                        </td>
                        <td>
                            <p:selectOneMenu id="country"
                                             value="#{newVisitor.countryId}"
                                             >
                                <!--<f:selectItem itemLabel="Select One" itemValue="" />-->
                                <f:selectItems value="#{countryServiceImpl.allCountries}"
                                               var="country"
                                               itemLabel="#{country.name}"
                                               itemValue="#{country.id}"
                                               />
                            </p:selectOneMenu>
                        </td>
                        <td><p:message id="countryMsg"
                                       for="country"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="foreigner"
                                           value="#{msg.foreigner}: "
                                           />
                        </td>
                        <td>
                            <p:selectBooleanCheckbox id="foreigner"
                                                     value="#{newVisitor.foreigner}"
                                                     >
                                <p:ajax update="passportId, passportIdMsg, citizenship, citizenshipMsg" />
                            </p:selectBooleanCheckbox>
                        </td>
                        <td><p:message id="foreignerMsg"
                                       for="foreigner"
                                       />
                        </td>
                    </tr>
                    <tr id="passportIdRow">
                        <td><p:outputLabel for="passportId"
                                           value="#{msg.passportId}: "
                                           />
                        </td>
                        <td>
                            <p:inputText id="passportId"
                                         value="#{newVisitor.passportId}"
                                         required="true"
                                         requiredMessage="#{msg.visitor_idnumber_valid}"
                                         disabled="#{not newVisitor.foreigner}"
                                         >
                                <f:converter binding="#{stringTrimmer}" />
                            </p:inputText>
                        </td>
                        <td><p:message id="passportIdMsg"
                                       for="passportId"
                                       />
                        </td>
                    </tr>
                    <tr id="citizenshipRow">
                        <td><p:outputLabel for="citizenship"
                                           value="#{msg.visitor_citizenship}: "
                                           />
                        </td>
                        <td>
                            <p:selectOneMenu id="citizenship"
                                             value="#{newVisitor.citizenshipId}"
                                             disabled="#{not newVisitor.foreigner}"
                                             >
                                <!--<f:selectItem itemLabel="Select One" itemValue="" />-->
                                <f:selectItems value="#{countryServiceImpl.allCountries}"
                                               var="country"
                                               itemLabel="#{country.name}"
                                               itemValue="#{country.id}"
                                               />
                            </p:selectOneMenu>
                        </td>
                        <td><p:message id="citizenshipMsg"
                                       for="citizenship"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel for="photo"
                                           value="#{msg.visitor_photo}: "
                                           />
                        </td>
                        <td>
<!--                                    <h:inputFile id="photo" value="#{newVisitor.photoFile}" required="true" requiredMessage="#{msg.required}">
                                <f:validator binding="#{visitorPhotoValidator}" />
                            </h:inputFile>-->

                            <p:fileUpload id="photo"
                                          mode="simple"
                                          value="#{newVisitor.photoFile}"
                                          required="true"
                                          requiredMessage="#{msg.required}"
                                          >
                                <f:validator validatorId="visitorPhotoEmptyValidator"/>
                                <f:validator validatorId="visitorPhotoSizeValidator"/>
                            </p:fileUpload>
                        </td>
                        <td><p:message id="photoMsg"
                                       for="photo"
                                       />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <ul class="center, inline">
                                <li>
                                    <p:commandButton value="#{msg.add}"
                                                     ajax="false"
                                                     update="newVisitorForm"
                                                     action="#{newVisitor.addVisitor()}"
                                                     >
                                        <!--<p:ajax update=":growl" />-->
                                    </p:commandButton>
                                </li>
                                <li class="inline">
                                    <p:commandButton value="#{msg.reset}"
                                                     update="newVisitorForm"
                                                     ajax="true"
                                                     process="@this"
                                                     resetValues="true"
                                                     />
                                </li>
                                <li>
                                    <p:commandButton value="#{msg.cancel}"
                                                     immediate="true"
                                                     action="#{navigation.goVisitors()}"
                                                     >
<!--                                         action="#{newVisitor.clear()}"
                                                     oncomplete="#{navigation.visitors}"-->
                                        <!--<p:resetInput target="newOfficeForm" />-->
                                        <p:ajax update="newVisitorForm"
                                                resetValues="true"
                                                />
                                    </p:commandButton>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>